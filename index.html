<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>JavaScript Handbook: 15 Chapters Interactive</title>
  <link href="https://fonts.googleapis.com/css2?family=Fira+Mono&family=Inter:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root {
  --bg: #0f1014;
  --fg: #e5e6eb;
  --card-bg: #1a1c23;
  --border: #2a2c37;
  --accent: #4fd1c5;
  --mono: 'Fira Mono', monospace;
  --sans: 'Inter', sans-serif;
  --success: #10b981;
  --warning: #f59e0b;
  --error: #ef4444;
}

[data-theme="light"] {
  --bg: #f5f5f7;
  --fg: #1a1c23;
  --card-bg: #ffffff;
  --border: #e5e6eb;
  --accent: #3a86ff;
  --success: #059669;
  --warning: #d97706;
  --error: #dc2626;
}

body {
  margin: 0; padding: 0;
  background: var(--bg);
  color: var(--fg);
  font-family: var(--sans);
  line-height: 1.6;
  transition: background-color 0.3s, color 0.3s;
}

h1 {
  font-family: var(--mono);
  color: var(--accent);
  text-align: center;
  margin: 3rem 0 1rem;
  font-size: 2.2rem;
}

.toggle-theme {
  position: fixed;
  top: 1.5rem;
  right: 2rem;
  background: var(--bg);
  border: 1px solid var(--fg);
  color: var(--fg);
  padding: 0.5rem 1rem;
  border-radius: 0.5rem;
  font-family: var(--sans);
  cursor: pointer;
  transition: background .2s, color .2s;
  z-index: 100;
}
.toggle-theme:hover {
  background: var(--fg);
  color: var(--bg);
}

main {
  max-width: 800px;
  margin: 0 auto;
  padding: 0 1rem 4rem;
}

section.topic {
  background: var(--card-bg);
  border: 1px solid var(--border);
  border-radius: 1rem;
  margin: 2.5rem 0;
  padding: 2rem 1.5rem;
  box-shadow: 0 4px 16px rgba(0,0,0,0.1);
  transition: background-color 0.3s, border-color 0.3s;
}

.topic-title {
  font-family: var(--mono);
  font-size: 1.5rem;
  color: var(--accent);
  margin-bottom: 0.5rem;
}

.topic-summary {
  font-size: 1rem;
  margin-bottom: 1.5rem;
  opacity: 0.85;
}

.wwh-box {
  display: flex;
  flex-wrap: wrap;
  gap: 1.5rem 1%;
  margin-bottom: 1.5rem;
}

.wwh-card {
  flex: 1 1 30%;
  background: var(--card-bg);
  border-left: 3px solid var(--accent);
  padding: 1rem;
  border-radius: 0.5rem;
  font-size: 0.95rem;
  transition: background-color 0.3s;
}

.practice-section {
  margin-top: 2rem;
}

.practice-title {
  font-weight: bold;
  margin-bottom: 1rem;
  color: var(--accent);
  font-size: 1.1rem;
}

.practice-item {
  margin-bottom: 2rem;
  border: 1px solid var(--border);
  border-radius: 0.6rem;
  overflow: hidden;
}

.practice-header {
  background: var(--bg);
  padding: 0.8rem 1rem;
  border-bottom: 1px solid var(--border);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.practice-label {
  font-weight: bold;
  font-family: var(--mono);
  font-size: 0.9rem;
}

.practice-status {
  font-size: 0.8rem;
  padding: 0.2rem 0.5rem;
  border-radius: 0.3rem;
  background: var(--border);
}

.practice-status.completed {
  background: var(--success);
  color: white;
}

.practice-description {
  padding: 1rem;
  background: var(--card-bg);
  font-size: 0.95rem;
  line-height: 1.5;
}

.code-editor-container {
  position: relative;
}

.code-editor {
  width: 100%;
  background: var(--bg);
  color: var(--fg);
  border: 1px solid var(--border);
  border-radius: 0.6rem;
  padding: 1rem;
  font-family: var(--mono);
  font-size: 1rem;
  min-height: 120px;
  resize: vertical;
  transition: background-color 0.3s, border-color 0.3s;
}

.code-editor:focus {
  outline: none;
  border-color: var(--accent);
}

.code-actions {
  display: flex;
  gap: 0.5rem;
  padding: 0.8rem 1rem;
  background: var(--card-bg);
  border-top: 1px solid var(--border);
}

.run-btn, .show-ans-btn, .reset-btn {
  background: var(--accent);
  color: var(--bg);
  border: none;
  border-radius: 0.5rem;
  padding: 0.6rem 1rem;
  font-family: var(--sans);
  font-weight: bold;
  cursor: pointer;
  transition: opacity .2s;
  font-size: 0.9rem;
}

.run-btn:hover, .show-ans-btn:hover, .reset-btn:hover {
  opacity: 0.9;
}

.show-ans-btn {
  background: var(--warning);
}

.reset-btn {
  background: var(--border);
  color: var(--fg);
}

.hint-btn {
  background: none;
  border: 1px solid var(--border);
  color: var(--fg);
  border-radius: 0.5rem;
  padding: 0.6rem 1rem;
  font-family: var(--sans);
  cursor: pointer;
  transition: background .2s;
  font-size: 0.9rem;
}

.hint-btn:hover {
  background: var(--border);
}

.result-container {
  padding: 1rem;
  background: var(--bg);
  border-top: 1px solid var(--border);
}

.result-title {
  font-weight: bold;
  margin-bottom: 0.5rem;
  font-size: 0.9rem;
  color: var(--accent);
}

.resultbox {
  background: var(--bg);
  color: var(--accent);
  padding: 0.8rem 1rem;
  border-radius: 0.5rem;
  font-family: var(--mono);
  font-size: 1rem;
  min-height: 1.2rem;
  border: 1px solid var(--border);
  transition: background-color 0.3s, border-color 0.3s;
  white-space: pre-wrap;
}

.resultbox.success {
  border-color: var(--success);
  color: var(--success);
}

.resultbox.error {
  border-color: var(--error);
  color: var(--error);
}

.hint-container {
  padding: 1rem;
  background: var(--bg);
  border-top: 1px solid var(--border);
  display: none;
}

.hint-title {
  font-weight: bold;
  margin-bottom: 0.5rem;
  font-size: 0.9rem;
  color: var(--warning);
}

.hint-content {
  font-size: 0.9rem;
  line-height: 1.5;
}

.expected-output {
  margin-top: 0.5rem;
  font-family: var(--mono);
  font-size: 0.85rem;
  color: var(--fg);
  opacity: 0.8;
}

.progress-indicator {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-top: 1rem;
  font-size: 0.9rem;
}

.progress-bar {
  flex-grow: 1;
  height: 6px;
  background: var(--border);
  border-radius: 3px;
  overflow: hidden;
}

.progress-fill {
  height: 100%;
  background: var(--accent);
  width: 0%;
  transition: width 0.3s;
}

@media (max-width: 700px) {
  .wwh-box { flex-direction: column; }
  .wwh-card { flex: 1 1 100%; }
  .code-actions {
    flex-wrap: wrap;
  }
}

  </style>
</head>
<body data-theme="dark">
  <button class="toggle-theme" onclick="toggleTheme()" id="themeBtn">☀️ Light</button>
  <h1>JavaScript Handbook: 15 Chapters</h1>
  <main id="handbook"></main>
  <script>

// Enhanced TOPICS array with hints and expected outputs
const TOPICS = [
  {
    title: "1. Variables & Data Types",
    summary: "Variables let you store, label, and use information in your code. Data types describe the kind of data (number, string, boolean, etc.) a variable can hold.",
    what: "A variable is a named location in memory for a value. Common types: Number, String, Boolean, Null, Undefined.",
    why: "Storing info (user, scores, config) makes code flexible and interactive.",
    how: "Declare with let, const, or var. Assign values with =. E.g., let age = 15;",
    where: "Used everywhere—games, forms, storage, calculations.",
    identify: "Look for let/const/var, assignment (=), typeof to check type.",
    usecase: "Keep user info, loop counters, calculation results, etc.",
    notes: "undefined: not set yet; null: empty on purpose. Use typeof for data type.",
    practices: [
      {
        code: `// SOLVED: Declare a string and print its value
let user = "Sam";
console.log(user); // Output: Sam`,
        description: "This example shows how to declare a variable and print its value.",
        hint: "Variables are declared using let, const, or var keywords.",
        expected: "Sam"
      },
      {
        code: `// Change 'fruit' and print its value
let fruit = "apple";
// TODO: Change the value and print it
console.log(fruit);`,
        description: "Change the value of the fruit variable and see the updated output.",
        hint: "You can assign a new value to the variable using the = operator.",
        expected: "Any string value you choose (e.g., 'banana')"
      },
      {
        code: `// Store your age as a number & print typeof
let myAge = __;
// TODO: Assign your age and check its type
console.log(typeof myAge);`,
        description: "Store your age as a number and check its data type using typeof.",
        hint: "Numbers don't need quotes. typeof returns the data type as a string.",
        expected: "number"
      },
      {
        code: `// Use a boolean for isActive
let isActive = __;
// TODO: Assign true or false and print it
console.log(isActive);`,
        description: "Create a boolean variable that represents an active/inactive state.",
        hint: "Boolean values are either true or false (without quotes).",
        expected: "true or false"
      },
      {
        code: `// Set a variable to null, print typeof
let something = null;
console.log(typeof something); // What will this output?`,
        description: "Explore JavaScript's behavior with the null value and typeof operator.",
        hint: "null is a special value representing intentional absence of any object value.",
        expected: "object"
      }
    ]
  },
  {
    title: "2. Operators & Conditionals",
    summary: "Operators let you do math and compare data. Conditionals allow your code to choose what action to take.",
    what: "Operators: + - * / (math), > < == === != (compare), && || ! (logic). Conditionals: if/else, ternary.",
    why: "Every program uses math, checks, and branching logic.",
    how: "Use symbols in code, e.g., x+2, if (score > 50) {...}",
    where: "Math, validation, branching, games, forms.",
    identify: "Symbols (+, *, &&), if (...) {...} structure.",
    usecase: "Check password validity, compare scores, enable features.",
    notes: "Use === for strict comparison between types.",
    practices: [
      {
        code: `// SOLVED: Print message based on score
let score = 8;
if (score > 5) {
  console.log("Great!");
} else {
  console.log("Try again!");
}
// Output: Great!`,
        description: "This example shows a basic if-else conditional statement.",
        hint: "The condition inside if() determines which code block executes.",
        expected: "Great!"
      },
      {
        code: `// Print YES if x is even, NO if odd
let x = 7;
// TODO: Complete the condition to check if x is even
if (x % 2 === 0) { 
  console.log("YES"); 
} else { 
  console.log("NO"); 
}`,
        description: "Use the modulo operator (%) to determine if a number is even or odd.",
        hint: "A number is even if it's divisible by 2 (remainder is 0).",
        expected: "NO"
      },
      {
        code: `// Print "High" if level >= 10, else "Low"
let level = __;
// TODO: Assign a value and complete the condition
if (level >= 10) { 
  console.log("High"); 
} else { 
  console.log("Low"); 
}`,
        description: "Practice using comparison operators with conditional statements.",
        hint: "Try different values for level to see both outcomes.",
        expected: "High or Low depending on your value"
      },
      {
        code: `// Use &&: check if loggedIn AND isMember
let loggedIn = true, isMember = false;
// TODO: Complete the condition using &&
if (loggedIn && isMember) { 
  console.log("Full access"); 
} else { 
  console.log("Partial/none"); 
}`,
        description: "Use the logical AND operator (&&) to check multiple conditions.",
        hint: "&& returns true only if both conditions are true.",
        expected: "Partial/none"
      },
      {
        code: `// What is output?
console.log( 6 !== "6" );
// Think about strict vs loose inequality`,
        description: "Understand the difference between strict and loose inequality operators.",
        hint: "!== compares both value and type, while != only compares value.",
        expected: "true"
      }
    ]
  },
  {
    title: "3. Arrays & Looping",
    summary: "Arrays store lists. Looping lets you process each item one by one automatically.",
    what: "Array: ordered collection. Loop: code repeated for each element.",
    why: "To work with lots of data easily (names, scores).",
    how: "Use [ ] to create arrays; for... and forEach for loops.",
    where: "Table data, user lists, options, UI elements.",
    identify: "Arrays: [ ... ]; looping: for, while, forEach, .map, .filter",
    usecase: "Show leaderboard, process inputs, manage game pieces.",
    notes: "Arrays indexed from 0. .map/.filter/.reduce for more power.",
    practices: [
      {
        code: `// SOLVED: Print all colors in array
let colors = ["red", "blue", "green"];
colors.forEach(c => console.log(c));
// Output: red\nblue\ngreen`,
        description: "Use forEach to iterate through an array and print each element.",
        hint: "forEach executes a function once for each array element.",
        expected: "red\nblue\ngreen"
      },
      {
        code: `// Add "yellow" to colors array and print new length
let colors = ["orange", "purple"];
// TODO: Add "yellow" and print the array length
colors.push("yellow");
console.log(colors.length);`,
        description: "Use the push method to add an element to an array.",
        hint: "push() adds elements to the end of an array and returns the new length.",
        expected: "3"
      },
      {
        code: `// Print the 2nd item in fruits
let fruits = ["apple", "banana", "cherry"];
// TODO: Access the second element (index 1)
console.log(fruits[1]);`,
        description: "Access array elements using their index (remember arrays start at index 0).",
        hint: "The first element is at index 0, second at index 1, etc.",
        expected: "banana"
      },
      {
        code: `// Use a loop to sum all numbers
let numbers = [4,5,9];
let sum = 0;
// TODO: Complete the loop to calculate the sum
for(let i=0;i<numbers.length;i++) {
  sum += numbers[i];
}
console.log(sum);`,
        description: "Use a for loop to iterate through an array and calculate the sum.",
        hint: "The loop runs from i=0 to i<numbers.length, adding each number to sum.",
        expected: "18"
      },
      {
        code: `// What will this output?
console.log(["a","b","c"].indexOf("b"));`,
        description: "Use indexOf to find the position of an element in an array.",
        hint: "indexOf returns the first index at which a given element can be found.",
        expected: "1"
      }
    ]
  },
  {
    title: "4. Objects & Methods",
    summary: "Objects group related properties and actions together. Methods (functions inside objects) use their data.",
    what: "Object: {key:value}. Method: function attached to an object.",
    why: "Represent things with multiple aspects (user profile, product).",
    how: "Use { } for objects, . for methods/properties.",
    where: "Every app (user, settings, complex data).",
    identify: "Curly braces ({}), dot notation, methods: obj.func()",
    usecase: "Profiles, catalogs, data structures.",
    notes: "Use 'this' to refer to the current object.",
    practices: [
      {
        code: `// SOLVED: Get a student's average mark
let student = {
  name: "Ravi",
  marks: [7, 9, 8],
  average: function() {
    return this.marks.reduce((s,v)=>s+v)/this.marks.length;
  }
};
console.log(student.average()); // Output: 8`,
        description: "This example shows an object with properties and a method.",
        hint: "Methods are functions defined as object properties.",
        expected: "8"
      },
      {
        code: `// Add a property "city" to this object and print it
let user = { name: "Asha" };
// TODO: Add city property and print the object
user.city = "Mumbai";
console.log(user.city);`,
        description: "Add a new property to an existing object using dot notation.",
        hint: "You can add properties to objects even after they're created.",
        expected: "Your chosen city name"
      },
      {
        code: `// Print the keys of the object below
let info = {a:1, b:2, c:3};
// TODO: Use Object.keys to get the keys
console.log(Object.keys(info));`,
        description: "Use Object.keys() to get an array of an object's property names.",
        hint: "Object.keys() returns an array containing the object's keys.",
        expected: '["a","b","c"]'
      },
      {
        code: `// Change the value of age in the following object
let profile = {name:"Jay", age:17};
// TODO: Update the age and print it
profile.age = 21;
console.log(profile.age);`,
        description: "Modify an existing property value in an object.",
        hint: "Use dot notation to access and assign new values to properties.",
        expected: "21"
      },
      {
        code: `// What does this method do?
let obj = {text:"hello", shout:function(){ return this.text.toUpperCase(); } }
console.log(obj.shout());`,
        description: "Understand how methods can use object properties via 'this'.",
        hint: "Inside a method, 'this' refers to the object that owns the method.",
        expected: "HELLO"
      }
    ]
  },
  {
    title: "5. Functions",
    summary: "Functions organize reusable code, enable custom logic and take inputs (parameters).",
    what: "Function: block of code with a name, possibly returning a value.",
    why: "Avoid repeating code, organize, and reuse logic.",
    how: "Define with function keyword, call with fn(args).",
    where: "All scripts, utility code, games, calculations.",
    identify: "Look for function keyword, ( ) for parameters.",
    usecase: "Sum numbers, manipulate strings, handle events.",
    notes: "Arrow functions (=>) for shorter syntax, especially for callbacks.",
    practices: [
      {
        code: `// SOLVED: Write function add that returns sum
function add(a, b) {
  return a + b;
}
console.log(add(2, 3)); // Output: 5`,
        description: "This example shows a simple function that takes parameters and returns a value.",
        hint: "Functions are defined with the function keyword and called with parentheses.",
        expected: "5"
      },
      {
        code: `// Write function greet(name) that returns "Hello " + name
function greet(name) {
  // TODO: Complete the function
  return "Hello " + name;
}
console.log(greet("Rita"));`,
        description: "Create a function that takes a parameter and returns a greeting message.",
        hint: "String concatenation can be done with the + operator.",
        expected: "Hello Rita"
      },
      {
        code: `// Write a function square(n) for n*n
function square(n) {
  // TODO: Complete the function
  return n * n;
}
// Print square(5)
console.log(square(5));`,
        description: "Create a function that calculates the square of a number.",
        hint: "The square of a number is the number multiplied by itself.",
        expected: "25"
      },
      {
        code: `// Call a function inside an array method
let nums = [2, 4, 6];
function double(n) { 
  return n*2; 
}
// TODO: Use map with the double function
console.log(nums.map(double));`,
        description: "Use the map method to transform each element of an array using a function.",
        hint: "map() creates a new array with the results of calling a function on every element.",
        expected: "[4,8,12]"
      },
      {
        code: `// What will this return?
const triple = x => x*3;
console.log(triple(4));`,
        description: "Understand arrow function syntax and usage.",
        hint: "Arrow functions provide a shorter syntax for writing functions.",
        expected: "12"
      }
    ]
  },
  // Insert after topic 5 and before the closing ];
{
  title: "6. Classes & Inheritance",
  summary: "Organize code into reusable blueprints; extend one class from another for shared features.",
  what: "A class is a template for objects. Inheritance means a child class uses properties/methods of a parent.",
  why: "Helps model complex systems and avoid repeating code.",
  how: "Use `class MyClass {}` and `extends`. Use methods and constructors.",
  where: "Games, apps, anything with objects that can be specialized.",
  identify: "Look for class, extends, new.",
  usecase: "Blog post objects, animal subclasses, user types.",
  notes: "Call `super()` in child class to run parent constructor.",
  practices: [
    {
      code: `// SOLVED: Simple class and method
class Animal {
  constructor(name) { this.name = name; }
  speak() { return this.name + " says hi!"; }
}
let dog = new Animal("Max");
console.log(dog.speak());`,
      description: "Define a class with a constructor and method. Create an object.",
      hint: "`class`, `constructor`, `new`, and methods are the key concepts.",
      expected: "Max says hi!"
    },
    {
      code: `// Create a Book class with title and author, print title
class Book { 
  // TODO: constructor
}
let b = new Book("JS", "Alex");
console.log(b.title);`,
      description: "Write a constructor with two properties, instantiate the Book.",
      hint: "`constructor(title, author) { this.title = title; ... }`",
      expected: "JS"
    },
    {
      code: `// Add greet() to Student class returning "Hi!"
class Student {
  // TODO: method greet()
}
let s = new Student();
console.log(s.greet());`,
      description: "Add a method to a simple class.",
      hint: "`greet() { return ... }` inside class, then `new Student().greet()`",
      expected: "Hi!"
    },
    {
      code: `// Inherit Car from Vehicle, call honk()
class Vehicle { honk() { return "Beep!"; } }
class Car extends Vehicle {}
let c = new Car();
console.log(c.honk());`,
      description: "Create a subclass and demonstrate inheritance.",
      hint: "`extends Vehicle` and methods are inherited automatically.",
      expected: "Beep!"
    },
    {
      code: `// What will this output?
class A { x() { return 7; } }
class B extends A { y(){return this.x()+1;} }
let b = new B();
console.log(b.y());`,
      description: "A class can use inherited methods in its own logic.",
      hint: "`this.x()` uses parent class's method.",
      expected: "8"
    }
  ]
},

{
  title: "7. DOM Manipulation",
  summary: "Change HTML elements from JS: update, add, style, and react to the page.",
  what: "DOM: Document Object Model. JS interacts using selectors and properties.",
  why: "All web apps dynamically change content.",
  how: "Get element using `document.getElementById()`; modify `.innerHTML`, `.style`.",
  where: "UI updates, games, tools.",
  identify: "getElementById, createElement, appendChild.",
  usecase: "Add notifications, change colors, build components.",
  notes: "Modifying DOM updates live page instantly.",
  practices: [
    {
      code: `// SOLVED: Set text in an element
// HTML: <div id="demo"></div>
document.getElementById("demo").textContent = "Hello DOM!";`,
      description: "Select and change text of a DOM element.",
      hint: "Use `textContent` or `innerHTML` to modify.",
      expected: "Hello DOM!"
    },
    {
      code: `// Add new paragraph to id="play" div
let p = document.createElement("p");
p.textContent = "JS paragraph!";
// TODO: attach p to <div id="play"></div>`,
      description: "Create an HTML element then add it to the page.",
      hint: "`appendChild` puts the element in the DOM.",
      expected: "[Paragraph added]"
    },
    {
      code: `// Change color of <div id="colorMe">
let colorDiv = document.getElementById("colorMe");
// TODO: set color`,
      description: "Set the color style property of a DOM element.",
      hint: "`colorDiv.style.color = 'red';`",
      expected: "red"
    },
    {
      code: `// Add item to <ul id="myList">
let li = document.createElement("li");
li.textContent = "Item";
// TODO: append to list`,
      description: "Create and insert a new list item.",
      hint: "`appendChild` adds to the `<ul>`.",
      expected: "[Item added]"
    },
    {
      code: `// What does innerHTML do?
let box = document.getElementById("mybox");
box.innerHTML = "<b>Bold!</b>";`,
      description: "Use innerHTML for rich content.",
      hint: "Sets HTML markup inside the element.",
      expected: "Bold! (bolded text)"
    }
  ]
},

{
  title: "8. Event Listeners",
  summary: "Respond to user actions: clicks, typing, mouse movement, etc.",
  what: "Events: actions on elements. Listeners: code that reacts.",
  why: "Interactive apps depend on listening for events.",
  how: "`addEventListener('event', fn)` attaches handlers.",
  where: "Buttons, forms, games.",
  identify: "addEventListener, .onclick, .oninput.",
  usecase: "Show/hide, validate, respond.",
  notes: "Event types: click, input, mouseover, submit, etc.",
  practices: [
    {
      code: `// SOLVED: On button click, log message
// HTML: <button id="b"></button>
document.getElementById("b").onclick = function() {
  console.log("Clicked!");
};`,
      description: "Add code to run upon button press.",
      hint: "Use `.onclick` or `.addEventListener`.",
      expected: "Clicked!"
    },
    {
      code: `// On div id="hover" log "Hovered!" on mouseover
document.getElementById("hover").addEventListener("mouseover", function(){console.log("Hovered!");});`,
      description: "React to mouseover event.",
      hint: "`addEventListener('mouseover', ...)`",
      expected: "Hovered!"
    },
    {
      code: `// Run on input value change in <input id="inp">
document.getElementById("inp").addEventListener("input", function(){console.log("Changed");})`,
      description: "Listen for input changes.",
      hint: "`addEventListener('input', ...)`",
      expected: "Changed"
    },
    {
      code: `// Prevent form submit reload
document.getElementById("quiz").addEventListener("submit", function(e) { e.preventDefault(); });`,
      description: "Stop default form reload.",
      hint: "`e.preventDefault();`",
      expected: "[no reload]"
    },
    {
      code: `// What does this print?
let n = 0;
document.getElementById("btn").onclick = ()=>console.log(++n);`,
      description: "Increment and print variable each click.",
      hint: "`++n` increases n by 1.",
      expected: "[number grows each click]"
    }
  ]
},

{
  title: "9. Forms & User Input",
  summary: "Read input from users via forms; validate and process it.",
  what: "Forms: HTML for user data. JS grabs data and processes.",
  why: "Web apps need data from users.",
  how: "Use `.value` property of form/input elements.",
  where: "Logins, quizzes, search boxes.",
  identify: "form, input, .onsubmit.",
  usecase: "Calculators, signup, question-answer.",
  notes: "Validate input to prevent errors.",
  practices: [
    {
      code: `// SOLVED: Add two numbers from input fields
document.getElementById("add").onclick = function() {
  let sum = Number(document.getElementById("a").value) + Number(document.getElementById("b").value);
  console.log(sum);
};`,
      description: "Get values from inputs, sum, and output.",
      hint: "Use `.value` and convert with `Number()`.",
      expected: "[sum output]"
    },
    {
      code: `// Log value from <input id="name"> when button clicked
document.getElementById("show").onclick = function() {
  console.log(document.getElementById("name").value);
};`,
      description: "Read and print user input from a field.",
      hint: "Use `document.getElementById('name').value`.",
      expected: "[input value]"
    },
    {
      code: `// Prevent form reload on submit
document.getElementById("myform").onsubmit = function(e) { e.preventDefault(); };`,
      description: "Stop default form behavior.",
      hint: "Call `e.preventDefault();` inside handler.",
      expected: "[no reload]"
    },
    {
      code: `// Print 'empty' if input value is ''
let v = document.getElementById("i").value;
if (v === "") console.log("empty");`,
      description: "Check for empty input.",
      hint: "Compare against empty string.",
      expected: "empty"
    },
    {
      code: `// What does type="password" do in <input>?`,
      description: "How password fields work.",
      hint: "Input hides value with •••.",
      expected: "[hidden/obscured text]"
    }
  ]
},

{
  title: "10. Asynchronous JS (Timeouts, Intervals, Promises, Fetch)",
  summary: "Run code after a delay, at intervals, or fetch data from APIs without blocking your app.",
  what: "Async: code that runs now and later. Includes setTimeout, setInterval, Promises, fetch.",
  why: "Needed for data requests, timers, animations.",
  how: "`setTimeout`, `setInterval`, `Promise`, `fetch`, `async/await`.",
  where: "APIs, games, updating UI.",
  identify: "setTimeout, setInterval, fetch, then, async.",
  usecase: "Animation, polling, real-time chat, loading data.",
  notes: "Use async/await for clear code; `fetch` requests remote data.",
  practices: [
    {
      code: `// SOLVED: Print 'waited' after 1 second
setTimeout(()=>console.log('waited'), 1000);`,
      description: "Set a timer to delay code execution.",
      hint: "`setTimeout(fn, ms)` runs once after ms milliseconds.",
      expected: "waited"
    },
    {
      code: `// Print tick every 0.5s; stop after 3
let c=0,id=setInterval(()=>{
  console.log("tick");
  c++;
  if(c===3) clearInterval(id);
},500);`,
      description: "Repeat a task at an interval.",
      hint: "Use `setInterval`. To stop, use `clearInterval`.",
      expected: "tick\ntick\ntick"
    },
    {
      code: `// Use Promise to print after 800ms
new Promise(res=>setTimeout(res,800)).then(()=>console.log("later"));`,
      description: "Create a promise that waits then resolves.",
      hint: "`then` runs when promise resolved.",
      expected: "later"
    },
    {
      code: `// Use async/await to fetch a random joke from API
async function getJoke() {
  let res = await fetch("https://icanhazdadjoke.com/", {headers:{'Accept':'application/json'}});
  let data = await res.json();
  console.log(data.joke);
}
// Call getJoke();`,
      description: "Async/await - fetch and handle response.",
      hint: "Mark function as async; use await before asynchronous calls.",
      expected: "[random joke output]"
    },
    {
      code: `// What does this print?
console.log("A"); setTimeout(()=>console.log("B"),1); console.log("C");`,
      description: "Order of code with async.",
      hint: "setTimeout is delayed; rest runs first.",
      expected: "A\nC\nB"
    }
  ]
},

{
  title: "11. Canvas & Drawing",
  summary: "Draw shapes, text, and images in browser for games and data display.",
  what: "Canvas HTML element. JS paints with commands.",
  why: "Custom graphics, games, charts.",
  how: "Get context: `getContext('2d')`; use fillRect, arc, fillText.",
  where: "Games, data graphics.",
  identify: "canvas, fillRect, arc, fillText.",
  usecase: "Bouncing ball, drawing app, bar chart.",
  notes: "Canvas is blank until you draw.",
  practices: [
    {
      code: `// SOLVED: Draw a blue rectangle and 'Hello'
// HTML: <canvas id="c" width="120" height="60"></canvas>
let ctx = document.getElementById("c").getContext("2d");
ctx.fillStyle = "#29f";
ctx.fillRect(10,10,80,32);
ctx.font = "18px Fira Mono";
ctx.fillStyle = "#fff";
ctx.fillText("Hello",20,35);`,
      description: "Use fillRect, fillText to draw.",
      hint: "Set fillStyle before drawing.",
      expected: "Blue rectangle and Hello"
    },
    {
      code: `// Draw a red circle on <canvas id="myC">
let ctx = document.getElementById("myC").getContext("2d");
ctx.beginPath();ctx.arc(40,40,20,0,2*Math.PI);
ctx.fillStyle="red";ctx.fill();`,
      description: "Draw a filled circle at spot.",
      hint: "Use beginPath, arc, fillStyle, fill.",
      expected: "Red circle"
    },
    {
      code: `// Write "JS" using fillText at (60,50) in blue
let ctx = document.getElementById("can").getContext("2d");
ctx.font = "20px monospace";
ctx.fillStyle = "blue";
ctx.fillText("JS",60,50);`,
      description: "Write text using fillText.",
      hint: "Set font and fillStyle before text.",
      expected: "Blue JS"
    },
    {
      code: `// Draw green line from (10,10) to (100,50)
let ctx = document.getElementById("lineC").getContext("2d");
ctx.strokeStyle = "green";
ctx.beginPath();ctx.moveTo(10,10);ctx.lineTo(100,50);ctx.stroke();`,
      description: "Draw a straight line.",
      hint: "Use beginPath, moveTo, lineTo, stroke.",
      expected: "Green Line"
    },
    {
      code: `// What does ctx.clearRect(0,0,120,60) do?`,
      description: "Clear canvas area.",
      hint: "Clears all drawings.",
      expected: "Canvas blank"
    }
  ]
},

{
  title: "12. Local Storage",
  summary: "Store and retrieve data in browser (persistent even after refresh).",
  what: "Key-value pairs stored by browser.",
  why: "Save settings, progress, cache.",
  how: "Use setItem/getItem/removeItem.",
  where: "Cart, quiz, dark mode preference.",
  identify: "localStorage object.",
  usecase: "Save lists, preferences.",
  notes: "Values must be strings; use JSON for arrays/objects.",
  practices: [
    {
      code: `// SOLVED: Save/load value
localStorage.setItem("city", "Delhi");
console.log(localStorage.getItem("city"));`,
      description: "Store then read a string value.",
      hint: "Key, value are both strings.",
      expected: "Delhi"
    },
    {
      code: `// Save answer=42 to localStorage and read it
localStorage.setItem("answer", "42");
console.log(localStorage.getItem("answer"));`,
      description: "Save a number as a string, print it.",
      hint: "Convert numbers to strings to store.",
      expected: "42"
    },
    {
      code: `// Store list ["a","b"] using JSON
let arr = ["a","b"];
localStorage.setItem("letters", JSON.stringify(arr));
console.log(JSON.parse(localStorage.getItem("letters")));`,
      description: "Use JSON to handle arrays/objects.",
      hint: "Stringify before storing.",
      expected: '["a","b"]'
    },
    {
      code: `// Remove the 'name' key
localStorage.removeItem("name");`,
      description: "Remove an item from storage.",
      hint: "removeItem takes the key name.",
      expected: "[removed]"
    },
    {
      code: `// What happens here?
localStorage.setItem("x","3"); localStorage.clear(); console.log(localStorage.getItem("x"));`,
      description: "Clear wipes all.",
      hint: "After clear, nothing remains.",
      expected: "null"
    }
  ]
},

{
  title: "13. Regular Expressions",
  summary: "Patterns for text matching, searching, or validation.",
  what: "A mini language for string analysis.",
  why: "Validate inputs, search, replace.",
  how: "/pattern/.test(str) and .match(str).",
  where: "Email, phone, searching.",
  identify: "RegExp: /abc/, .test(), .match(), .replace()",
  usecase: "Check email, sanitize logs.",
  notes: "Common symbols: ^ (start), $ (end), \\d (digit), . (any)",
  practices: [
    {
      code: `// SOLVED: Test email for '@'
let email = "abc@x.com";
console.log(/@/.test(email));`,
      description: "Test if a character exists using RegExp.",
      hint: "/@/.test(str) returns true if '@' found.",
      expected: "true"
    },
    {
      code: `// Check if name starts with 'A'
let name = "Ankit";
console.log(/^A/.test(name));`,
      description: "Test starting character.",
      hint: "^A matches names that start with A.",
      expected: "true"
    },
    {
      code: `// Check if "hello world" is all letters/spaces
let str = "hello world";
console.log(/^[a-z ]+$/.test(str));`,
      description: "Match lower-case and spaces.",
      hint: "+ means one or more.",
      expected: "true"
    },
    {
      code: `// Replace 'cat' with 'dog'
let s = "my cat ran";
console.log(s.replace(/cat/, "dog"));`,
      description: "Use replace to substitute text.",
      hint: "First match only replaced.",
      expected: "my dog ran"
    },
    {
      code: `// What does /\\d+/ match?`,
      description: "Finds one or more digits.",
      hint: "\\d is digit; + one or more.",
      expected: "[digits]"
    }
  ]
},

{
  title: "14. JSON Parsing & APIs",
  summary: "Structured data; interface with APIs using JSON format.",
  what: "JSON: JavaScript Object Notation - text representation of objects.",
  why: "Share/read data with external services.",
  how: "JSON.stringify(x), JSON.parse(str).",
  where: "APIs, save-load, configs.",
  identify: "JSON, fetch(url).",
  usecase: "Apply/save user settings, fetch real-time info.",
  notes: "APIs return data in JSON format.",
  practices: [
    {
      code: `// SOLVED: Convert to/from JSON
let obj = {a:4, b:5};
let s = JSON.stringify(obj);
console.log(JSON.parse(s));`,
      description: "Turn JS object into JSON string, then back to object.",
      hint: "Stringify for storage/transmission.",
      expected: '{a:4, b:5}'
    },
    {
      code: `// Get age from JSON string
let j = '{"name":"Rita","age":22}';
let obj = JSON.parse(j);
console.log(obj.age);`,
      description: "Parse, then access property.",
      hint: "Parse first then use dot.",
      expected: "22"
    },
    {
      code: `// Create JSON string from {x:1, y:9}
let p = {x:1, y:9};
console.log(JSON.stringify(p));`,
      description: "Stringify any JS object.",
      hint: "Use for sending over network.",
      expected: '{"x":1,"y":9}'
    },
    {
      code: `// Fetch country data from API, print name
// Use fetch("https://restcountries.com/v3.1/name/india")`,
      description: "Use fetch, then parse and print.",
      hint: "async/await and .json().",
      expected: "[country name]"
    },
    {
      code: `// What does JSON.stringify([1,2,3]) return?
console.log(JSON.stringify([1,2,3]));`,
      description: "Serialize array.",
      hint: "Arrays become bracketed strings.",
      expected: "[1,2,3]"
    }
  ]
},

{
  title: "15. Mini Project: To-Do List",
  summary: "Use all previous concepts to build an interactive to-do app.",
  what: "Combine DOM, events, arrays, localStorage.",
  why: "Shows real-world JS power - build, update, save data.",
  how: "Add tasks, render, delete, persist.",
  where: "Task management, planners, notes.",
  identify: "DOM, forEach, addEventListener, localStorage.",
  usecase: "Grocery list, study tracker.",
  notes: "Coding projects solidify JS skills.",
  practices: [
    {
      code: `// SOLVED: Add a task and print all tasks
let tasks = [];
tasks.push("Task 1");
console.log(tasks);`,
      description: "Start a to-do list, add an item.",
      hint: "Array push appends item.",
      expected: '["Task 1"]'
    },
    {
      code: `// Add two more tasks; print array
tasks.push("Task 2");
tasks.push("Task 3");
console.log(tasks);`,
      description: "Extend your task list.",
      hint: "Push as many as you want.",
      expected: '["Task 1", "Task 2", "Task 3"]'
    },
    {
      code: `// Delete first task
tasks.shift();
console.log(tasks);`,
      description: "Remove from array using shift.",
      hint: "Shift takes out the first item.",
      expected: '[... remaining items]'
    },
    {
      code: `// Save tasks to localStorage
localStorage.setItem("tasks", JSON.stringify(tasks));`,
      description: "Store your to-do list as text.",
      hint: "Stringify before saving.",
      expected: "[saved]"
    },
    {
      code: `// Render each task in <ul id="taskList">
tasks.forEach(t => {
  let li = document.createElement("li");
  li.textContent = t;
  document.getElementById("taskList").appendChild(li);
});`,
      description: "Show all tasks on the page.",
      hint: "Make a new list item for each.",
      expected: "[items rendered]"
    }
  ]
}

];

// UI render logic below
function topicHTML(topic, idx) {
  return `
<section class="topic">
  <div class="topic-title">${topic.title}</div>
  <div class="topic-summary">${topic.summary}</div>
  <div class="wwh-box">
    <div class="wwh-card"><b>What?</b><br>${topic.what}</div>
    <div class="wwh-card"><b>Why?</b><br>${topic.why}</div>
    <div class="wwh-card"><b>How?</b><br>${topic.how}</div>
    <div class="wwh-card"><b>Where?</b><br>${topic.where}</div>
    <div class="wwh-card"><b>Identify?</b><br>${topic.identify}</div>
    <div class="wwh-card"><b>Use-case:</b><br>${topic.usecase}</div>
  </div>
  <div class="topic-section"><b>Notes:</b> ${topic.notes || ''}</div>
  <div class="practice-section">
    <div class="practice-title">Practice Exercises:</div>
      ${ topic.practices.map((p,i)=>`
      <div class="practice-item" id="practice-${idx}-${i}">
        <div class="practice-header">
          <span class="practice-label">${i===0?'Solved Example':'Try It Yourself ' + i}</span>
          <span class="practice-status">${i===0?'Example':'Incomplete'}</span>
        </div>
        <div class="practice-description">
          ${p.description}
        </div>
        <div class="code-editor-container">
          <textarea class="code-editor" id="code-${idx}-${i}">${p.code}</textarea>
        </div>
        <div class="code-actions">
          <button class="run-btn" onclick="runCode('code-${idx}-${i}','result-${idx}-${i}', ${idx}, ${i})">Run Code</button>
          <button class="hint-btn" onclick="toggleHint('hint-${idx}-${i}')">Show Hint</button>
          <button class="show-ans-btn" onclick="showAnswer(${idx},${i},'code-${idx}-${i}','result-${idx}-${i}')">Show Answer</button>
          <button class="reset-btn" onclick="resetCode('code-${idx}-${i}', ${idx}, ${i})">Reset</button>
        </div>
        <div class="hint-container" id="hint-${idx}-${i}">
          <div class="hint-title">Hint:</div>
          <div class="hint-content">${p.hint}</div>
          <div class="expected-output">Expected output: ${p.expected}</div>
        </div>
        <div class="result-container">
          <div class="result-title">Output:</div>
          <div class="resultbox" id="result-${idx}-${i}"></div>
        </div>
      </div>
      `).join('')}
    </div>
    <div class="progress-indicator">
      <span>Progress:</span>
      <div class="progress-bar">
        <div class="progress-fill" id="progress-${idx}"></div>
      </div>
      <span id="progress-text-${idx}">0/${topic.practices.length-1}</span>
    </div>
</section>
`.trim();
}

function runCode(codeId, outId, topicIdx, practiceIdx) {
  let code = document.getElementById(codeId).value;
  let output = '';
  let isError = false;
  
  try {
    let func = new Function(`
      let console_log = [];
      const console = { log: (...args) => console_log.push(args.join(' ')) };
      ${code}
      return console_log.join('\\n');
    `);
    output = func();
  } catch(e) { 
    output = "Error: " + e.message; 
    isError = true;
  }
  
  const resultBox = document.getElementById(outId);
  resultBox.textContent = output || '(No output)';
  resultBox.className = 'resultbox' + (isError ? ' error' : (output ? ' success' : ''));
  
  // Update progress if it's not the example and output matches expected
  if (practiceIdx > 0 && !isError) {
    updateProgress(topicIdx, practiceIdx, output);
  }
}

function showAnswer(topicIdx, practiceIdx, codeId, outId) {
  const practice = TOPICS[topicIdx].practices[practiceIdx];
  const answer = practice.code.replace('// TODO:', '').replace('__', 'your value');
  
  document.getElementById(codeId).value = answer;
  document.getElementById(outId).textContent = "Answer loaded. Run the code to see the result.";
  document.getElementById(outId).className = 'resultbox';
  
  // Update progress
  updateProgress(topicIdx, practiceIdx, 'answered');
}

function resetCode(codeId, topicIdx, practiceIdx) {
  const originalCode = TOPICS[topicIdx].practices[practiceIdx].code;
  document.getElementById(codeId).value = originalCode;
  document.getElementById(`result-${topicIdx}-${practiceIdx}`).textContent = '';
  document.getElementById(`result-${topicIdx}-${practiceIdx}`).className = 'resultbox';
  
  if (practiceIdx > 0) {
    const statusElement = document.querySelector(`#practice-${topicIdx}-${practiceIdx} .practice-status`);
    statusElement.textContent = 'Incomplete';
    statusElement.className = 'practice-status';
    
    updateProgressIndicator(topicIdx);
  }
}

function toggleHint(hintId) {
  const hintContainer = document.getElementById(hintId);
  hintContainer.style.display = hintContainer.style.display === 'block' ? 'none' : 'block';
}

function updateProgress(topicIdx, practiceIdx, output) {
  if (practiceIdx === 0) return; // Skip the example
  
  const statusElement = document.querySelector(`#practice-${topicIdx}-${practiceIdx} .practice-status`);
  statusElement.textContent = 'Completed';
  statusElement.className = 'practice-status completed';
  
  updateProgressIndicator(topicIdx);
}

function updateProgressIndicator(topicIdx) {
  const topic = TOPICS[topicIdx];
  const completed = document.querySelectorAll(`#topic-${topicIdx} .practice-status.completed`).length - 1; // Subtract example
  const total = topic.practices.length - 1; // Subtract example
  
  const progressFill = document.getElementById(`progress-${topicIdx}`);
  const progressText = document.getElementById(`progress-text-${topicIdx}`);
  
  const percentage = (completed / total) * 100;
  progressFill.style.width = `${percentage}%`;
  progressText.textContent = `${completed}/${total}`;
}

document.getElementById('handbook').innerHTML =
  TOPICS.map((topic, idx) => topicHTML(topic, idx)).join('\n');

// Add topic IDs for progress tracking
document.querySelectorAll('.topic').forEach((topicEl, idx) => {
  topicEl.id = `topic-${idx}`;
});

function toggleTheme() {
  let currentTheme = document.body.getAttribute('data-theme');
  let newTheme = currentTheme === 'light' ? 'dark' : 'light';
  document.body.setAttribute('data-theme', newTheme);
  document.getElementById('themeBtn').textContent = newTheme === 'light' ? "🌙 Dark" : "☀️ Light";
  
  // Save theme preference
  localStorage.setItem('js-handbook-theme', newTheme);
}

// Load saved theme preference
document.addEventListener('DOMContentLoaded', function() {
  const savedTheme = localStorage.getItem('js-handbook-theme') || 'dark';
  document.body.setAttribute('data-theme', savedTheme);
  document.getElementById('themeBtn').textContent = savedTheme === 'light' ? "🌙 Dark" : "☀️ Light";
});

  </script>
</body>
</html>